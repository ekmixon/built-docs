<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Integration example: Apache | Integrations Developer Guide | Elastic</title>
<link rel="home" href="index.html" title="Integrations Developer Guide"/>
<link rel="up" href="index.html" title="Integrations Developer Guide"/>
<link rel="prev" href="manifest-spec.html" title="manifest.yml"/>
<link rel="next" href="elastic-package.html" title="elastic-package"/>
<meta name="DC.type" content="Learn/Docs/Integrations/Developer"/>
<meta name="DC.subject" content="Integrations"/>
<meta name="DC.identifier" content="master"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2021 Elasticsearch B.V. Copying, publishing and/or distributing without written permission is strictly prohibited.-->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
<b>
  📗 Comments? ✏️ Feedback? 🤔 Suggestions?
  <a href="https://github.com/elastic/observability-docs/pull/769">Leave it here</a> 🙏👋
</b>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Integrations Developer Guide</a></span>
»
<span class="breadcrumb-node">Integration example: Apache</span>
</div>
<div class="navheader">
<span class="prev">
<a href="manifest-spec.html">« <code class="literal">manifest.yml</code></a>
</span>
<span class="next">
<a href="elastic-package.html"><code class="literal">elastic-package</code> »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="integration-example-apache"></a>Integration example: Apache<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/integrations/integration-example.asciidoc">edit</a></h1>
</div></div></div>
<p>Let&#8217;s look at an example:
The <a href="https://github.com/elastic/integrations/tree/master/packages/apache" class="ulink" target="_top">Apache integration</a>.
This integration periodically:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
fetches <span class="strong strong"><strong>status metrics</strong></span> from the Apache server
</li>
<li class="listitem">
fetches and parses <span class="strong strong"><strong>access logs</strong></span> created by the Apache server
</li>
<li class="listitem">
fetches and parses <span class="strong strong"><strong>error logs</strong></span> created by the Apache server
</li>
</ul>
</div>
<p>Each of these different data types is considered a <span class="strong strong"><strong>data stream</strong></span>.</p>
<h3><a id="apache-data-streams"></a>Data streams<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/integrations/integration-example.asciidoc">edit</a></h3>
<div class="sidebar">
<div class="titlepage"></div>
<p><span class="strong strong"><strong>Data streams</strong></span> allow you to store time series data across multiple indices while giving you a single named resource for requests.</p>
<details>
<summary class="title">Expand to learn more</summary>
<div class="content">
<p>stuff</p>
</div>
</details>
</div>
<p>Each data stream is represented by a folder in the <code class="literal">data_stream</code> directory:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">apache
└───data_stream
│   └───access <a id="CO1-1"></a><i class="conum" data-value="1"></i>
│   └───error <a id="CO1-2"></a><i class="conum" data-value="1"></i>
│   └───status <a id="CO1-3"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-1"><i class="conum" data-value="1"></i></a><a href="#CO1-2"></a><a href="#CO1-3"></a></p>
</td>
<td align="left" valign="top">
<p>Apache&#8217;s three different data streams</p>
</td>
</tr>
</table>
</div>
<p>Let&#8217;s choose one of these data streams to dig into: access logs.</p>
<h3><a id="apache-ingest-pipelines"></a>Ingest pipelines<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/integrations/integration-example.asciidoc">edit</a></h3>
<p>Access logs (or any logs) should be parsed into structured data prior to ingesting them into Elasticsearch.
To do this, integrations use <span class="strong strong"><strong>ingest pipelines</strong></span></p>
<div class="sidebar">
<div class="titlepage"></div>
<p><span class="strong strong"><strong>Ingest pipelines</strong></span> let you perform common transformations on your data before indexing. For example, you can use pipelines to remove fields, extract values from text, and enrich your data.</p>
<p>A pipeline consists of a series of configurable tasks called processors. Each processor runs sequentially, making specific changes to incoming documents. After the processors have run, Elasticsearch adds the transformed documents to your data stream or index.</p>
<details>
<summary class="title">Expand to learn more</summary>
<div class="content">
<p>stuff</p>
</div>
</details>
</div>
<p>Ingest pipelines are defined in the <code class="literal">elasticsearch/ingest_pipeline</code> directory.
They only apply to the parent data stream:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">apache
└───data_stream
│   └───access
│   │   └───elasticsearch/ingest_pipeline
│   │          default.yml <a id="CO2-1"></a><i class="conum" data-value="1"></i>
│   └───error
│   └───status</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The ingest pipeline definition for the access logs data stream of the apache integration</p>
</td>
</tr>
</table>
</div>
<p>The ingest pipeline definition requires a description and an array of processors.
Here&#8217;s a snippet of the access logs ingest pipeline:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">description: "Pipeline for parsing Apache HTTP Server access logs."
processors:
- set:
    field: event.ingested
    value: '{{_ingest.timestamp}}'
- rename:
    field: message
    target_field: event.original
- remove:
    field: apache.access.time
    ignore_failure: true</pre>
</div>
<p>For more information, see add a link here of some kind</p>
<h3><a id="apache-mappings"></a>Mappings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/integrations/integration-example.asciidoc">edit</a></h3>
<p>Ingest pipelines create fields in an Elasticsearch index, but don&#8217;t define the fields themselves.
Each field needs a defined data type, or mapping.</p>
<div class="sidebar">
<div class="titlepage"></div>
<p><span class="strong strong"><strong>Mapping</strong></span> is the process of defining how a document, and the fields it contains, are stored and indexed.
Each document is a collection of fields, which each have their own data type. When mapping your data, you create a mapping definition, which contains a list of fields that are pertinent to the document. A mapping definition also includes metadata fields, like the _source field, which customize how a document’s associated metadata is handled.</p>
<details>
<summary class="title">Expand to learn more</summary>
<div class="content">
<p>stuff</p>
</div>
</details>
</div>
<p>Mappings are defined in the <code class="literal">fields</code> directory.
Like ingest pipelines, mappings only apply to the parent datastream.
The apache integration has four different field definitions:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">apache
└───data_stream
│   └───access
│   │   └───elasticsearch/ingest_pipeline
│   │   │      default.yml
│   │   └───fields
│   │          agent.yml <a id="CO3-1"></a><i class="conum" data-value="1"></i>
│   │          base-fields.yml <a id="CO3-2"></a><i class="conum" data-value="2"></i>
│   │          ecs.yml <a id="CO3-3"></a><i class="conum" data-value="3"></i>
│   │          fields.yml <a id="CO3-4"></a><i class="conum" data-value="4"></i>
│   └───error
│   └───status</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>??</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">base-fields.yml</code> never changes and is required for all integrations</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Defines the relevant ECS fields</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Custom apache access log fields ??</p>
</td>
</tr>
</table>
</div>
<p>Maybe include one here or something</p>
<h3><a id="apache-ecs"></a>ECS fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/integrations/integration-example.asciidoc">edit</a></h3>
<div class="sidebar">
<div class="titlepage"></div>
<p><span class="strong strong"><strong>ECS</strong></span></p>
<p>Something about ECS here.</p>
<details>
<summary class="title">Expand to learn more</summary>
<div class="content">
<p>stuff</p>
</div>
</details>
</div>
<h3><a id="apache-policy-templates"></a>Policy templates?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/integrations/integration-example.asciidoc">edit</a></h3>
<p>??</p>
<h3><a id="apache-kibana-assets"></a>Kibana assets<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/integrations/integration-example.asciidoc">edit</a></h3>
<p>Something about Kibana dashboards or visualizations</p>
<h3><a id="apache-everything-else"></a>Everything else<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/integrations/integration-example.asciidoc">edit</a></h3>
<p>Something about docs, screenshots, and tests</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="manifest-spec.html">« <code class="literal">manifest.yml</code></a>
</span>
<span class="next">
<a href="elastic-package.html"><code class="literal">elastic-package</code> »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
